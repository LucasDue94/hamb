<nav class="nav-container">
  <a [routerLink]="['/agenda', 'show', dataAgenda]" class="back">
    <fa-icon [icon]="['fas','arrow-left']"></fa-icon>
    Voltar
  </a>
  <p class="title-main">Histórico de Atendimentos</p>
</nav>
<section class="container-atendimento">
  <article *ngFor="let atendimento of atendimentos" class="card">
    <p class="content-card">{{atendimento.conteudo}}</p>
    <footer class="footer-card">
      <span class="data">{{dateToString(atendimento?.dataAtendimento)}}</span>
      <span class="cid">{{atendimento.cid.id}} - {{atendimento.cid.diagnostico}}</span>
      <span class="usuario">CRM: {{atendimento.usuario.crm}} - {{atendimento.usuario.nome}}</span>
    </footer>
  </article>
  <div class="withoutData" *ngIf="atendimentos?.length == 0">
    O paciente ainda não possui atendimentos.
    <fa-icon class="icon" [icon]="['fas','frown']" size="2x"></fa-icon>
  </div>
</section>
<div class="errors content-error">
  Você não escreveu nada no histórico.
  <fa-icon class="icon" [icon]="['fas','frown']" size="2x"></fa-icon>
</div>
<section class="atendimento-form">
  <textarea placeholder="Digite o registro deste atendimento" [(ngModel)]="conteudo" class="form-control" id="conteudo">
  </textarea>
  <div class="container-buttons">
    <div class="errors">
      Você não selecionou um cid.
      <fa-icon class="icon" [icon]="['fas','frown']" size="2x"></fa-icon>
    </div>
    <div class="cid-container" (click)="search()" #cidContainer>
      <fa-icon *ngIf="!checkField(cid.id)" class="cid-icon"
               [icon]="['fas','book-medical']"></fa-icon>
      <h1 *ngIf="checkField(cid.id)" class="cid-info valid-cid">{{cid.id}}</h1>
      <span class="cid-info">{{cid.diagnostico}}</span>
    </div>
    <button (click)="save()" class="button btn-save">Salvar</button>
  </div>
  <div class="container-search" *ngIf="activeSearch">
    <fast-search (getData)="selectCid($event)" [service]="cidService" [fields]="['id','diagnostico']"
                 [widthField]="['1','3']"></fast-search>
  </div>
</section>
<ngx-spinner bdColor="rgba(255,255,255, 0.7)" color="#4DC2B3" size="medium" type="ball-pulse">
  <p class="spinner-title">Carregando...</p>
</ngx-spinner>
